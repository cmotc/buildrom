--- LinuxBIOSv2/targets/tyan/s2891/Config.lb	2007-09-26 16:37:35.000000000 -0400
+++ LinuxBIOSv2/targets/tyan/s2891/Config.lb	2007-09-26 18:09:54.000000000 -0400
@@ -5,57 +5,19 @@
 target s2891
 mainboard tyan/s2891
 
-# Tyan s2891
-romimage "normal"
-#       48K for ATI ROM in 1M
-	option ROM_SIZE = 1024*1024-48*1024
-#       48K for SCSI FW or ATI ROM
-#        option ROM_SIZE = 512*1024-48*1024
-#       48K for SCSI FW and 48K for ATI ROM
-#       option ROM_SIZE = 512*1024-48*1024-48*1024
-#       64K for Etherboot
-#        option ROM_SIZE = 512*1024-64*1024
-	option USE_FALLBACK_IMAGE=0
-#        option ROM_IMAGE_SIZE=0x11800
-#	option ROM_IMAGE_SIZE=0x13000
-#	option ROM_IMAGE_SIZE=0x16000
-	option ROM_IMAGE_SIZE=0x20000
-        option XIP_ROM_SIZE=0x20000
-	option LINUXBIOS_EXTRA_VERSION="$(shell cat ../../VERSION)_Normal"
-#       payload ../../../payloads/tg3--ide_disk.zelf
-#        payload ../../../payloads/filo.elf
-#        payload ../../../payloads/filo_mem.elf
-#       payload ../../../payloads/filo.zelf
-#        payload ../../../payloads/tg3--filo.zelf
-	payload ../../../../payloads/tg3--filo_hda2_vga.zelf
-#	payload ../../../payloads/tg3--filo_hda2_vga_com2.zelf
-#	payload ../../../payloads/tg3--filo_hda2_vga_5_3.zelf
-#	payload ../../../payloads/tg3--filo_btext_hda2.zelf
-#       payload ../../../payloads/e1000--filo.zelf
-#        payload ../../../payloads/tg3--e1000--filo.zelf
-#        payload ../../../payloads/tg3--eepro100--e1000--filo_hda2.zelf
-end
+option ROM_SIZE=0x100000
+# 36K for ATI ROM in 1M
+option FALLBACK_SIZE=(ROM_SIZE-0x9000)
 
+# Tyan s2891
 romimage "fallback" 
 	option USE_FALLBACK_IMAGE=1
-#        option ROM_IMAGE_SIZE=0x11800
-#	option ROM_IMAGE_SIZE=0x13000
-#	option ROM_IMAGE_SIZE=0x16000
-	option ROM_IMAGE_SIZE=0x20000
-        option XIP_ROM_SIZE=0x20000
+  option CONFIG_COMPRESSED_PAYLOAD_LZMA=1
+  option CONFIG_PRECOMPRESSED_PAYLOAD=1
+  option ROM_IMAGE_SIZE=0x17000
+  option XIP_ROM_SIZE=0x40000
 	option LINUXBIOS_EXTRA_VERSION="$(shell cat ../../VERSION)_Fallback"
-#       payload ../../../payloads/tg3--ide_disk.zelf
-#        payload ../../../payloads/filo.elf
-#        payload ../../../payloads/filo_mem.elf
-#       payload ../../../payloads/filo.zelf
-#        payload ../../../payloads/tg3--filo.zelf
-	payload ../../../../payloads/tg3--filo_hda2_vga.zelf
-#	payload ../../../payloads/tg3--filo_hda2_vga_com2.zelf
-#	payload ../../../payloads/tg3--filo_hda2_vga_5_3.zelf
-#       payload ../../../payloads/e1000--filo.zelf
-#	payload ../../../payloads/tg3--filo_btext_hda2.zelf
-#        payload ../../../payloads/tg3--e1000--filo.zelf
-#        payload ../../../payloads/tg3--eepro100--e1000--filo_hda2.zelf
+	payload ../payload.elf
 end
 
-buildrom ./coreboot.rom ROM_SIZE "normal" "fallback"
+buildrom ./coreboot.rom ROM_SIZE "fallback"
